<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>get user media</title>
</head>

<body>
    <video id="webcam" width="100%" height="100%" controls autoplay></video>
    <script type="text/javascript">
        // window.onload = function () {
        console.log('get user media start.')
        navigator.getUserMedia = navigator.getUserMedia ||
            (navigator.mozGetUserMedia || navigator.webkitGetUserMedia || navigator.msGetUserMedia);

        if (navigator.getUserMedia) {
            navigator.getUserMedia({
                video: true,
                audio: false,
            }, onSuccess, onError);
        } else {
            console.log('your browser not support getUserMedia');
        }

        var video = document.getElementById('webcam');
        function onSuccess(stream) {
            video.srcObject = stream;
            // if (window.URL) {
            //     video.src = window.URL.createObjectURL(stream); //浏览器正在取消对media stream类型的支持
            // }

            // video.autoplay = true;
            //or video.play();
        }

        function onError(err) {
            debugger;
            console.log(err);
        }
    </script>
</body>

</html>
